<!DOCTYPE HTML>
<html>
<head>
    <title>ARPANET</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="css/arpanet.css" />

    <style>
        /* ======================================= */
        /* STILI GENERALI */
        /* ======================================= */
        #page-wrapper { background: transparent !important; }
        #main { background: transparent !important; }
        #features { background: #000 !important; padding-top: 2em; }
        
        #header .container h1 a,
        #header .container p {
            color: #ff0000; 
            text-shadow: 0 0 5px rgba(255, 0, 0, 0.596);
        }

        #features h1 {
            font-family: 'typewriter', sans-serif; 
            color: #ffaa00; 
            text-shadow: 0 0 8px rgba(255, 170, 0, 0.9);
            font-size: 1.5em;
            letter-spacing: 1px;
        }
        
        .image.featured {
            border: 2px solid #00ff00; 
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
        }

        /* ======================================= */
        /* STILI MODAL & CODEC */
        /* ======================================= */

        #immagineTrigger, #immagineTrigger2, #immagineTrigger3 {
            cursor: pointer;
            transition: transform 0.2s;
        }
        #immagineTrigger:hover, #immagineTrigger2:hover, #immagineTrigger3:hover {
            transform: scale(1.05); 
        }

        .modal {
            display: none; 
            position: fixed; 
            z-index: 1000; 
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto; 
            background-color: rgba(0, 0, 0, 0.8); /* Sfondo un po' più scuro */
        }

        .modal-contenuto {
            margin: 10% auto; 
            width: 95%; /* Un po' più largo per far stare i nuovi input */
            max-width: 600px; /* Aumentato max-width */
            background-color: #004d00; 
            border: 4px solid #00ff00; 
            border-radius: 0; 
            padding: 12px; 
            box-shadow: 0 0 25px rgba(0, 255, 0, 0.5); 
            color: #00ff00;
        }

        .modal-interno-codec {
            background: #000; 
            border: 2px solid #00ff00; 
            padding: 25px; 
        }

        .chiudi-modal {
            color: #00ff00; 
            float: right;
            font-size: 32px;
            font-weight: bold;
            text-shadow: 0 0 5px #00ff00; 
            opacity: 0.7;
            margin-top: -5px; 
            cursor: pointer;
        }
        .chiudi-modal:hover { opacity: 1; color: #fff; }

        .modal-interno-codec h2, 
        .modal-interno-codec p, 
        .modal-interno-codec label {
            font-family: 'MGS_chat', 'MGS', monospace; 
            color: #00ff00 !important; 
            text-align: left; 
            text-shadow: 0 0 5px rgba(0, 255, 0, 0.7); 
        }

        .modal-interno-codec label {
            font-size: 1.2em;
            margin-bottom: 5px;
            margin-top: 15px;
            display: block;
            font-weight: bold;
        }

        /* --- NUOVI STILI PER GLI INPUT COORDINATE --- */
        
        .input-gruppo {
            display: flex; 
            align-items: center; /* Allinea verticalmente al centro */
            justify-content: flex-start;
            gap: 5px; /* Spazio tra i pezzettini */
        }

        /* Stile base per tutti gli input delle coordinate */
        .coord-input {
            font-family: 'MGS_chat', monospace;
            font-size: 1.3em;
            background-color: #000;
            color: #00ff00;
            border: 2px solid #00ff00;
            border-radius: 0;
            padding: 8px;
            text-align: center;
            box-sizing: border-box;
        }

        .coord-input:focus {
            outline: none;
            background-color: #051a05;
            box-shadow: 0 0 10px #00ff00;
        }

        /* Dimensioni specifiche */
        .w-3 { width: 70px; } /* Per input a 3 cifre */
        .w-4 { width: 90px; } /* Per input a 4 cifre */

        /* Separatore (il punto) e lo Zero finale */
        .separatore, .suffisso-zero {
            font-family: 'MGS_chat', monospace;
            font-size: 1.5em;
            color: #00ff00;
            font-weight: bold;
            padding-top: 5px; /* Piccolo adjust visivo */
        }

        #loginForm button {
            font-family: 'MGS', sans-serif; 
            font-size: 1.2em;
            letter-spacing: 2px;
            text-transform: uppercase;
            background-color: #000;
            color: #00ff00;
            border: 2px solid #00ff00;
            border-radius: 0;
            padding: 14px 20px;
            margin-top: 25px;
            cursor: pointer;
            width: 100%;
        }

        #loginForm button:hover {
            background-color: #00ff00; 
            color: #000;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.8);
        }

        #messaggioErrore {
            font-family: 'MGS_chat', monospace;
            color: #ff0000 !important; 
            text-shadow: 0 0 5px rgba(255, 0, 0, 0.7);
            margin-top: 15px;
            min-height: 1.2em; /* Evita saltelli se vuoto */
        }

    </style>
</head>
<body class="homepage is-preload">
    <div id="page-wrapper">

        <section id="header">
            <div class="container">
                <h1 id="logo"><a href="index.html">ARPANET</a></h1>
                <p>Communication System V1</p>
            </div>
        </section>
        
        <hr>

        <section id="features">
            <div class="container">
                <div class="row aln-center">
                    <div class="col-4 col-6-medium col-12-small">
                        <section>
                            <a href="chat.html" id="immagineTrigger2" class="image featured">
                                <img src="Immagini/Copilot_20251118_231448.png" alt="Icona 1" />
                            </a>
                            <header><h1>07.11.1966</h1></header>
                        </section>
                    </div>
                    <div class="col-4 col-6-medium col-12-small">
                        <section>
                            <a href="#" id="immagineTrigger" class="image featured">
                                <img src="Immagini/Copilot_20251118_231448.png" alt="Icona 2" />
                            </a>
                            <header><h1>08.11.1966</h1></header>
                        </section>
                    </div>
                    <div class="col-4 col-6-medium col-12-small">
                        <section>
                            <a href="#" id="immagineTrigger3" class="image featured">
                                <img src="Immagini/Copilot_20251118_230245.png" alt="Icona 3" />
                            </a>
                            <header><h1>Philosophers Project</h1></header>
                        </section>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <div id="modalLogin" class="modal">
        <div class="modal-contenuto">
            <div class="modal-interno-codec">
                <span class="chiudi-modal">&times;</span>
                <h2 id="modalTitolo">Accesso Area Riservata</h2>

                <form id="loginForm" autocomplete="off">
                    
                    <label>COORDINATA EST (E)</label>
                    <div class="input-gruppo">
                        <input type="text" id="estInt" class="coord-input w-3" maxlength="3" placeholder="XXX" required>
                        <span class="separatore">.</span>
                        <input type="text" id="estDec" class="coord-input w-3" maxlength="3" placeholder="XXX" required>
                        <span class="suffisso-zero">0</span>
                    </div>

                    <label>COORDINATA NORD (N)</label>
                    <div class="input-gruppo">
                        <input type="text" id="nordInt" class="coord-input w-4" maxlength="4" placeholder="YYYY" required>
                        <span class="separatore">.</span>
                        <input type="text" id="nordDec" class="coord-input w-3" maxlength="3" placeholder="XXX" required>
                        <span class="suffisso-zero">0</span>
                    </div>
                    
                    <button type="submit">CONNECT</button>
                    
                    <p id="messaggioErrore"></p>
                </form>
            </div>
        </div>
    </div>


    <script>
        // --- 1. CONFIGURAZIONE ---
        // Ho aggiornato i codici per adattarli al nuovo formato (Int + Dec)
        // Esempio: Est: 220.500 -> estInt: "220", estDec: "50" (il terzo 0 è statico o parte dell'input?)
        // Richiesta: "6 valori editabili divisi da un punto (3 e 3 editabili) più lo zero non editabile"
        // Quindi Est Input totale = 6 cifre. Nord Input totale = 7 cifre.
        
        const loginConfigs = {
            "immagineTrigger2": { 
                // Es. 220.500 0
                estInt: "220", estDec: "500",
                nordInt: "5008", nordDec: "100",
                pagina: "chat.html",
                titolo: "Accesso 19.11.1966"
            },
            "immagineTrigger": { 
                estInt: "100", estDec: "555",
                nordInt: "4509", nordDec: "200",
                pagina: "pagina_giorno_1.html",
                titolo: "Accesso 22.11.1966"
            },
            "immagineTrigger3": { 
                estInt: "999", estDec: "999",
                nordInt: "9999", nordDec: "999",
                pagina: "pagina_top_secret.html",
                titolo: "Accesso Area [TOP SECRET]"
            }
        };

        // --- 2. ELEMENTI ---
        const modal = document.getElementById("modalLogin");
        const modalTitolo = modal.querySelector("h2"); 
        const closeBtn = document.querySelector(".chiudi-modal");
        const loginForm = document.getElementById("loginForm");
        const messaggioErrore = document.getElementById("messaggioErrore");

        // Campi Input
        const inpEstInt = document.getElementById("estInt");
        const inpEstDec = document.getElementById("estDec");
        const inpNordInt = document.getElementById("nordInt");
        const inpNordDec = document.getElementById("nordDec");

        // --- 3. GESTIONE AUTO-FOCUS (UX MIGLIORATA) ---
        // Funzione per saltare al prossimo campo quando si raggiunge la lunghezza massima
        function setupAutoTab(currentField, nextField) {
            currentField.addEventListener('input', function() {
                if (this.value.length >= this.maxLength) {
                    nextField.focus();
                }
            });
        }

        // Collega i salti logici
        setupAutoTab(inpEstInt, inpEstDec); // Est Intero -> Est Decimale
        setupAutoTab(inpEstDec, inpNordInt); // Est Decimale -> Nord Intero
        setupAutoTab(inpNordInt, inpNordDec); // Nord Intero -> Nord Decimale

        // --- 4. LOGICA MODAL ---
        let triggerAttivo = null;

        Object.keys(loginConfigs).forEach(triggerId => {
            const triggerElement = document.getElementById(triggerId);
            if (triggerElement) {
                triggerElement.onclick = function(event) {
                    event.preventDefault(); 
                    triggerAttivo = triggerId; 
                    const config = loginConfigs[triggerAttivo];
                    
                    modalTitolo.textContent = config.titolo; 
                    messaggioErrore.textContent = ""; 
                    loginForm.reset(); 
                    modal.style.display = "block";
                    
                    // Focus sul primo campo
                    setTimeout(() => inpEstInt.focus(), 100);
                }
            }
        });

        closeBtn.onclick = function() { modal.style.display = "none"; }
        window.onclick = function(event) { if (event.target == modal) modal.style.display = "none"; }

        // --- 5. LOGICA SUBMIT ---
        loginForm.onsubmit = function(event) {
            event.preventDefault(); 

            if (!triggerAttivo) return; 
            const config = loginConfigs[triggerAttivo];
            
            // Prendi valori
            const eI = inpEstInt.value;
            const eD = inpEstDec.value;
            const nI = inpNordInt.value;
            const nD = inpNordDec.value;

            // Confronta tutte le parti
            if (eI === config.estInt && eD === config.estDec &&
                nI === config.nordInt && nD === config.nordDec) {
                
                alert(`Connessione Stabilita.\nTarget Acquisito.`);
                window.location.href = config.pagina;
            } else {
                messaggioErrore.innerHTML = `> ERRORE DI ALLINEAMENTO <br> Coordinate non valide.`;
                
                // Effetto scuotimento (opzionale, solo se supportato CSS)
                loginForm.style.animation = "none";
                setTimeout(() => loginForm.style.animation = "shake 0.5s", 10);
            }
        }
    </script>
    
    <style>
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }
    </style>

</body>
</html>